<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSXGraph examples</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.2.1/jsxgraphcore.js"
    integrity="sha512-PXyZZw3mqo2U6EhIn5qw1W+W87P7EsO8ey3yC3xuGAr9bQ7GF+XkBrhI6PAiJc1OXTfjFJXP/MK+Z1YT/iE8SQ=="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.2.1/jsxgraph.min.css"
    integrity="sha512-590+zTPqUjnvC0cslllceBnkvm6le2dw3qyN/zn4d2b3EUxfdWO6OvB+h2Jcm0JZiHhOL56L4Am/o+Xpo/OHeQ=="
    crossorigin="anonymous" />


  <style>
    html,
    body {
      height: 80%;
      width: 100%;
      margin: 0;
    }

    #wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100%;
      width: 100%;
      padding-top: 5%;
      /*calc(60vmin- 3.5em); */

    }

    #jxgbox {
      flex: 1;
      width: 80%;
      height: 60%;
      /* calc(60vmin-3.5em);*/
    }

    .jxgbox {
      background-color: 'blue';
    }
  </style>
</head>

<body>
  <div id="wrapper" style="background-color: lightgray; color: blue ">
    THIS IS A WRAPPER
    <div id="jxgbox" class="jxgbox"> THIS IS A WRAPPER </div>
  </div>


  <script type="text/javascript">

    // JXG.Options.axis.ticks.majorHeight = 60;
    // JXG.Options.axis.ticks.insertTicks = false;
    // JXG.Options.axis.ticks.ticksDistance = 100;

    var board = JXG.JSXGraph.initBoard('jxgbox', {
      boundingbox: [-3, 3, 8, -8], axis: false, showNavigation: false, keepaspectratio: true,
      showcopyright: false,
      showFullscreen: true,
      grid: false,
      zoom: true,
      title: 'Titulo',
      fullscreen: {
        symbol: 'Tela inteira' //'\u22c7'
      },
      pan: {
        enabled: true, needTwoFingers: true,
        needShift: false,
      }, drag: {
        enabled: true
      },

    },
    )

    // console.log(board);
    var N = board.create('slider', [[0, 2], [3, 2], [1, 3, 40]], { name: 'n', snapWidth: 1, color: 'blue' });
    var circ = board.create('circle', [[3, -3], 2], {
      strokeWidth: 1, strokecolor: 'black', strokeWidth: 2
    });

    var c = board.create('curve', [[0], [0]], { strokecolor: 'red', strokeWidth: 2 });
    c.updateDataArray = function () {
      var r = 2, n = Math.floor(N.Value()),
        x = [0], y = [0],
        phi = Math.PI / n,
        h = r * Math.cos(phi),
        s = r * Math.sin(phi),
        i, j,
        px = 0, py = 0, sgn = 1,
        d = 16,
        dt = phi / d,
        pt;

      for (i = 0; i < n; i++) {
        for (j = -d; j <= d; j++) {
          pt = dt * j;
          x.push(px + r * Math.sin(pt));
          y.push(sgn * r * Math.cos(pt) - (sgn - 1) * h * 0.5);
        }
        px += s;
        sgn *= (-1);
      }
      x.push((n - 1) * s);
      y.push(h + (sgn - 1) * h * 0.5);
      this.dataX = x;
      this.dataY = y;
    }

    var c2 = board.create('curve', [[0], [0]], { strokecolor: 'red', strokeWidth: 1 });
    c2.updateDataArray = function () {
      var r = 2, n = Math.floor(N.Value()),
        px = circ.midpoint.X(), py = circ.midpoint.Y(),
        x = [px], y = [py],
        phi = Math.PI / n,
        s = r * Math.sin(phi),
        i, j,
        d = 16,
        dt = phi / d,
        pt = Math.PI * 0.5 + phi;

      for (i = 0; i < n; i++) {
        for (j = -d; j <= d; j++) {
          x.push(px + r * Math.cos(pt));
          y.push(py + r * Math.sin(pt));
          pt -= dt;
        }
        x.push(px);
        y.push(py);
        pt += dt;
      }
      this.dataX = x;
      this.dataY = y;
    }
    board.update();


    let wrapper = document.getElementById('wrapper');

    window.addEventListener('resize', handleResize)

    function handleResize() {
      wrapper.style.width = "";
      wrapper.style.height = "";
      let theWidth = wrapper.getBoundingClientRect().width;
      let theHeight = wrapper.getBoundingClientRect().height;

      // console.log(theWidth, theHeight)

      board.resizeContainer(theWidth, theHeight, false, false);
      board.update()
    }

    xaxis = board.create('axis', [[0, 0], [1, 0]],
      {
        name: 'X',
        withLabel: true,
        ticks: { visible: false },
        label: {
          position: 'rt',  // possible values are 'lft', 'rt', 'top', 'bot'
          offset: [-15, -15]   // (in pixels)
        }
      });

    yaxis = board.create('axis', [[0, 0], [0, 1]],
      {
        name: 'Y',
        withLabel: true,
        label: {
          position: 'lft',  // possible values are 'lft', 'rt', 'top', 'bot'
          offset: [-10, 10]   // (in pixels)
        }
      });

    console.log('yaxis = ', yaxis)

    // board.renderer.container.grid = false;

    // console.log("grid[0] =", board.grids[0])
    // console.log("style = ", board.renderer.container.style);
    // board.grids[0].setDisplayRendNode(true);

    // board.grids[0].visProp.visible = true;

    // board.defaultAxes.x.defaultTicks.setAttribute({ majorHeight: -1 });
    // board.defaultAxes.y.defaultTicks.setAttribute({ majorHeight: -1 });
    // board.fullUpdate();

  </script>

  <style>
    .jxgbox {
      background-color: transparent;
    }
  </style>


</body>




</html>